# 🚀 GR Installment Manager# 🚀 GR Installment Manager



<div align="center"><div align="center">



![GR Installment Manager](https://img.shields.io/badge/GR-Installment_Manager-007ACC?style=for-the-badge&logo=react&logoColor=white)![GR Installment Manager](https://img.shields.io/badge/GR-Installment_Manager-007ACC?style=for-the-badge&logo=react&logoColor=white)

![Next.js](https://img.shields.io/badge/Next.js-14.0-black?style=flat-square&logo=next.js)![Next.js](https://img.shields.io/badge/Next.js-14.0-black?style=flat-square&logo=next.js)

![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=flat-square&logo=typescript&logoColor=white)![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=flat-square&logo=typescript&logoColor=white)

![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=flat-square&logo=supabase&logoColor=white)![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=flat-square&logo=supabase&logoColor=white)

![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=flat-square&logo=tailwind-css&logoColor=white)![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=flat-square&logo=tailwind-css&logoColor=white)



**From Paper Chaos to Digital Magic** ✨**From Paper Chaos to Digital Magic** ✨



*Transforming Dad's paper-based business into a digital powerhouse - because who has time for calculators and sticky notes?**Transforming Dad's paper-based business into a digital powerhouse - because who has time for calculators and sticky notes?*



[📖 Live Demo](#) • [📋 Features](#-features) • [🚀 Quick Start](#-quick-start) • [📚 Documentation](#-documentation)[📖 Live Demo](#) • [📋 Features](#-features) • [🚀 Quick Start](#-quick-start) • [📚 Documentation](#-documentation)



</div></div>



------



## 📖 The Story Behind GR Installment Manager## 📖 The Story Behind GR Installment Manager



> **"Dad, remember when you spent hours calculating installments on paper? Yeah, me too. That's why I built this."**> **"Dad, remember when you spent hours calculating installments on paper? Yeah, me too. That's why I built this."**



My dad ran his tire business the old-school way - mountains of paper, endless calculations, and a calculator that probably dreamed of retirement. As a hobbyist entrepreneur, he juggled customer payments, tracked outstanding balances, and managed sales with nothing but spreadsheets and sheer determination.My dad ran his tire business the old-school way - mountains of paper, endless calculations, and a calculator that probably dreamed of retirement. As a hobbyist entrepreneur, he juggled customer payments, tracked outstanding balances, and managed sales with nothing but spreadsheets and sheer determination.



**One day, I decided to change that.** What started as a "quick app" for Dad became a full-fledged business management system. No more lost receipts, forgotten payments, or midnight calculation sessions. Just clean interfaces, automated calculations, and peace of mind.**One day, I decided to change that.** What started as a "quick app" for Dad became a full-fledged business management system. No more lost receipts, forgotten payments, or midnight calculation sessions. Just clean interfaces, automated calculations, and peace of mind.



*Because every dad deserves a system as reliable as his favorite coffee mug.**Because every dad deserves a system as reliable as his favorite coffee mug.*



------



## 🎯 What Makes This Special?## 🎯 What Makes This Special?



### 💡 **The Problem We Solved**### 💡 **The Problem We Solved**

- ❌ Manual calculations that took hours- ❌ Manual calculations that took hours

- ❌ Lost paper receipts and payment records- ❌ Lost paper receipts and payment records

- ❌ No way to track customer payment history- ❌ No way to track customer payment history

- ❌ Difficult to generate business reports- ❌ Difficult to generate business reports

- ❌ Risk of calculation errors affecting relationships- ❌ Risk of calculation errors affecting relationships



### ✅ **Our Solution**### ✅ **Our Solution**

- ⚡ Instant automated calculations- ⚡ Instant automated calculations

- 📄 Professional PDF reports (with our brand new redesign!)- 📄 Professional PDF reports (with our brand new redesign!)

- 📊 Real-time dashboards and analytics- 📊 Real-time dashboards and analytics

- 🔍 Advanced search and filtering- 🔍 Advanced search and filtering

- 📱 Mobile-responsive design- 📱 Mobile-responsive design

- 🔐 Secure, role-based access control- 🔐 Secure, role-based access control



------



## 🌟 Features## 🌟 Features



### 👥 **Customer Management**### 👥 **Customer Management**

- **Smart Registration**: NIC validation, duplicate prevention, and instant profile creation- **Smart Registration**: NIC validation, duplicate prevention, and instant profile creation

- **Payment Tracking**: See exactly who paid what and when- **Payment Tracking**: See exactly who paid what and when

- **Status Monitoring**: Active/inactive customers with payment health indicators- **Status Monitoring**: Active/inactive customers with payment health indicators

- **Contact Management**: Phone, address, and all essential details in one place- **Contact Management**: Phone, address, and all essential details in one place



### 🛒 **Sales & Inventory**### 🛒 **Sales & Inventory**

- **Flexible Products**: Add tires, tools, or anything else with custom pricing- **Flexible Products**: Add tires, tools, or anything else with custom pricing

- **Smart Calculations**: System handles all the math - you focus on selling- **Smart Calculations**: System handles all the math - you focus on selling

- **Unique Sale IDs**: Format like `S-20241225-0001` for easy tracking- **Unique Sale IDs**: Format like `S-20241225-0001` for easy tracking

- **Quantity Support**: Sell multiple units with automatic total calculations- **Quantity Support**: Sell multiple units with automatic total calculations

- **Status Tracking**: Active sales, completed deals, and payment defaults- **Status Tracking**: Active sales, completed deals, and payment defaults



### 💰 **Payment Processing**### 💰 **Payment Processing**

- **Daily Collections**: Streamlined payment entry for your collection routine- **Daily Collections**: Streamlined payment entry for your collection routine

- **Multiple Methods**: Cash, bank transfers, checks - we've got you covered- **Multiple Methods**: Cash, bank transfers, checks - we've got you covered

- **Overpayment Handling**: Customers can pay extra without breaking the system- **Overpayment Handling**: Customers can pay extra without breaking the system

- **Payment History**: Complete audit trail for every transaction- **Payment History**: Complete audit trail for every transaction

- **Balance Updates**: Real-time remaining balance calculations- **Balance Updates**: Real-time remaining balance calculations



### 📊 **Reporting & Analytics**### 📊 **Reporting & Analytics**

- **Executive Dashboard**: Key metrics at a glance (because who reads walls of text?)- **Executive Dashboard**: Key metrics at a glance (because who reads walls of text?)

- **Financial Reports**: Revenue tracking, outstanding balances, profit analysis- **Financial Reports**: Revenue tracking, outstanding balances, profit analysis

- **Customer Insights**: Registration trends and payment behavior patterns- **Customer Insights**: Registration trends and payment behavior patterns

- **Sales Performance**: Daily, weekly, monthly tracking with visual charts- **Sales Performance**: Daily, weekly, monthly tracking with visual charts

- **PDF Reports**: Beautiful, professional customer statements (our latest pride!)- **PDF Reports**: Beautiful, professional customer statements (our latest pride!)



### 🔐 **Security & User Management**### 🔐 **Security & User Management**

- **Role-Based Access**: Super Admin and Data Entry Staff with appropriate permissions- **Role-Based Access**: Super Admin and Data Entry Staff with appropriate permissions

- **Secure Authentication**: Protected routes and encrypted data storage- **Secure Authentication**: Protected routes and encrypted data storage

- **Audit Trails**: Track every action for accountability- **Audit Trails**: Track every action for accountability

- **Data Validation**: Comprehensive input checking prevents errors- **Data Validation**: Comprehensive input checking prevents errors



### 🎨 **User Experience**### 🎨 **User Experience**

- **Responsive Design**: Works perfectly on desktop, tablet, and mobile- **Responsive Design**: Works perfectly on desktop, tablet, and mobile

- **Real-time Updates**: Data refreshes automatically - no manual refreshes needed- **Real-time Updates**: Data refreshes automatically - no manual refreshes needed

- **Search & Filter**: Find anything instantly with advanced filtering- **Search & Filter**: Find anything instantly with advanced filtering

- **Error Recovery**: User-friendly error messages instead of cryptic codes- **Error Recovery**: User-friendly error messages instead of cryptic codes

- **Dark/Light Mode**: Because why not? (Coming soon!)- **Dark/Light Mode**: Because why not? (Coming soon!)



------



## 🛠️ Technology Stack## 🛠️ Technology Stack



<div align="center"><div align="center">



### **Frontend Magic**### **Frontend Magic**

![Next.js](https://img.shields.io/badge/Next.js-000000?style=for-the-badge&logo=next.js&logoColor=white)![Next.js](https://img.shields.io/badge/Next.js-000000?style=for-the-badge&logo=next.js&logoColor=white)

![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)

![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)

![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)



### **Backend Powerhouse**### **Backend Powerhouse**

![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=for-the-badge&logo=supabase&logoColor=white)![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=for-the-badge&logo=supabase&logoColor=white)

![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)



### **Development Tools**### **Development Tools**

![ESLint](https://img.shields.io/badge/ESLint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white)![ESLint](https://img.shields.io/badge/ESLint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white)

![Prettier](https://img.shields.io/badge/Prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=black)![Prettier](https://img.shields.io/badge/Prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=black)

![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)



</div></div>



------



## 🚀 Quick Start## 🚀 Quick Start



### Prerequisites### Prerequisites

- Node.js 18+ (because we like living on the edge)- Node.js 18+ (because we like living on the edge)

- A Supabase account (free tier works great!)- A Supabase account (free tier works great!)

- A modern web browser- A modern web browser

- Coffee ☕ (optional but recommended)- Coffee ☕ (optional but recommended)



### Installation### Installation



1. **Clone the repository**1. **Clone the repository**

   ```bash   ```bash

   git clone https://github.com/sh13y/GR-Installment-Manager.git   git clone https://github.com/sh13y/GR-Installment-Manager.git

   cd GR-Installment-Manager   cd GR-Installment-Manager

   ```   ```



2. **Install dependencies**2. **Install dependencies**

   ```bash   ```bash

   npm install   npm install

   # or if you're a yarn person   # or if you're a yarn person

   yarn install   yarn install

   ```   ```



3. **Set up environment variables**3. **Set up environment variables**

   ```bash   ```bash

   cp .env.example .env.local   cp .env.example .env.local

   ```   ```



   Edit `.env.local` with your Supabase credentials:   Edit `.env.local` with your Supabase credentials:

   ```env   ```env

   NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url   NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url

   NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key   NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

   ```   ```



4. **Set up the database**4. **Set up the database**

   - Create a new Supabase project   - Create a new Supabase project

   - Run the SQL script in `database/schema.sql`   - Run the SQL script in `database/schema.sql`

   - Add your admin user with the script in `database/default-admin-user.sql`   - Add your admin user with the script in `database/default-admin-user.sql`



5. **Start the development server**5. **Start the development server**

   ```bash   ```bash

   npm run dev   npm run dev

   ```   ```



6. **Open your browser**6. **Open your browser**

   ```   ```

   http://localhost:3000   http://localhost:3000

   ```   ```



**That's it!** Your dad's new business management system is ready to roll.**That's it!** Your dad's new business management system is ready to roll.



------



## 📊 Business Logic## 📊 Business Logic



### The Installment Model### The Installment Model

Our system is built around a flexible installment structure:Our system is built around a flexible installment structure:



- **Registration Fee**: One-time customer onboarding (optional)- **Registration Fee**: One-time customer onboarding (optional)

- **Initial Payment**: Down payment at purchase time- **Initial Payment**: Down payment at purchase time

- **Daily Installments**: Regular payments until balance is zero- **Daily Installments**: Regular payments until balance is zero

- **Service Charges**: Additional fees for the installment service- **Service Charges**: Additional fees for the installment service

- **Product Flexibility**: Any product with custom pricing and terms- **Product Flexibility**: Any product with custom pricing and terms



### Example Calculation### Example Calculation

``````

Product Price: Rs. 5,000Product Price: Rs. 5,000

Service Charge: Rs. 500Service Charge: Rs. 500

Total Amount: Rs. 5,500Total Amount: Rs. 5,500

Initial Payment: Rs. 1,000Initial Payment: Rs. 1,000

Remaining Balance: Rs. 4,500Remaining Balance: Rs. 4,500

Daily Installment: Rs. 150 (30 days)Daily Installment: Rs. 150 (30 days)

``````



*No more mental math gymnastics!**No more mental math gymnastics!*



------



## 📚 Documentation## 📚 Documentation



### For Users### For Users

- [User Manual](docs/user-manual.md) - How to use the system day-to-day- [User Manual](docs/user-manual.md) - How to use the system day-to-day

- [Business Requirements](docs/business-requirements.md) - Understanding the business logic- [Business Requirements](docs/business-requirements.md) - Understanding the business logic



### For Developers### For Developers

- [API Documentation](docs/api-documentation.md) - Technical API reference- [API Documentation](docs/api-documentation.md) - Technical API reference

- [Deployment Guide](docs/deployment-guide.md) - Production deployment instructions- [Deployment Guide](docs/deployment-guide.md) - Production deployment instructions

- [Code Structure](docs/code-structure.md) - Understanding the codebase- [Code Structure](docs/code-structure.md) - Understanding the codebase



### Database### Database

- [Schema Documentation](database/schema.sql) - Complete database structure- [Schema Documentation](database/schema.sql) - Complete database structure

- [Migrations](database/migrations/) - Database updates and changes- [Migrations](database/migrations/) - Database updates and changes



------



## 🔧 Development## 🔧 Development



### Available Scripts### Available Scripts

```bash```bash

npm run dev      # Start development servernpm run dev      # Start development server

npm run build    # Build for productionnpm run build    # Build for production

npm run start    # Start production servernpm run start    # Start production server

npm run lint     # Run ESLintnpm run lint     # Run ESLint

npm run type-check # Run TypeScript checksnpm run type-check # Run TypeScript checks

``````



### Project Structure### Project Structure

``````

src/src/

├── app/                 # Next.js app router pages├── app/                 # Next.js app router pages

├── components/          # Reusable UI components├── components/          # Reusable UI components

│   ├── ui/             # Basic UI components│   ├── ui/             # Basic UI components

│   ├── customers/      # Customer-related components│   ├── customers/      # Customer-related components

│   ├── dashboard/      # Dashboard components│   ├── dashboard/      # Dashboard components

│   └── ...│   └── ...

├── hooks/              # Custom React hooks├── hooks/              # Custom React hooks

├── lib/                # Utility libraries├── lib/                # Utility libraries

├── types/              # TypeScript type definitions├── types/              # TypeScript type definitions

└── utils/              # Helper functions└── utils/              # Helper functions

``````



------



## 🚀 Deployment## 🚀 Deployment



### Vercel (Recommended)### Vercel (Recommended)

1. Connect your GitHub repository to Vercel1. Connect your GitHub repository to Vercel

2. Add environment variables in Vercel dashboard2. Add environment variables in Vercel dashboard

3. Deploy automatically on every push to main3. Deploy automatically on every push to main



### Manual Deployment### Manual Deployment

1. Build the application: `npm run build`1. Build the application: `npm run build`

2. Start the production server: `npm start`2. Start the production server: `npm start`

3. Configure your web server (nginx, Apache, etc.)3. Configure your web server (nginx, Apache, etc.)



------



## 🤝 Contributing## 🤝 Contributing



We welcome contributions! Whether it's:We welcome contributions! Whether it's:

- 🐛 Bug fixes- 🐛 Bug fixes

- ✨ New features- ✨ New features

- 📚 Documentation improvements- 📚 Documentation improvements

- 🎨 UI/UX enhancements- 🎨 UI/UX enhancements



### How to Contribute### How to Contribute

1. Fork the repository1. Fork the repository

2. Create a feature branch: `git checkout -b feature/amazing-feature`2. Create a feature branch: `git checkout -b feature/amazing-feature`

3. Commit your changes: `git commit -m 'Add amazing feature'`3. Commit your changes: `git commit -m 'Add amazing feature'`

4. Push to the branch: `git push origin feature/amazing-feature`4. Push to the branch: `git push origin feature/amazing-feature`

5. Open a Pull Request5. Open a Pull Request



------



## 📞 Support## 📞 Support



### Having Issues?### Having Issues?

1. Check the [Troubleshooting Guide](docs/troubleshooting.md)1. Check the [Troubleshooting Guide](docs/troubleshooting.md)

2. Search existing [GitHub Issues](https://github.com/sh13y/GR-Installment-Manager/issues)2. Search existing [GitHub Issues](https://github.com/sh13y/GR-Installment-Manager/issues)

3. Create a new issue with detailed information3. Create a new issue with detailed information



### Feature Requests### Feature Requests

Have an idea to make Dad's life even easier? We'd love to hear it!Have an idea to make Dad's life even easier? We'd love to hear it!

- [GitHub Discussions](https://github.com/sh13y/GR-Installment-Manager/discussions)- [GitHub Discussions](https://github.com/sh13y/GR-Installment-Manager/discussions)

- [Feature Requests](https://github.com/sh13y/GR-Installment-Manager/issues/new?template=feature_request.md)- [Feature Requests](https://github.com/sh13y/GR-Installment-Manager/issues/new?template=feature_request.md)



------



## 🙏 Acknowledgments## 🙏 Acknowledgments



- **Dad**: For inspiring this project and being the best beta tester- **Dad**: For inspiring this project and being the best beta tester

- **Supabase**: For making backend development actually enjoyable- **Supabase**: For making backend development actually enjoyable

- **Next.js Team**: For creating such an amazing framework- **Next.js Team**: For creating such an amazing framework

- **Open Source Community**: For all the amazing tools and libraries- **Open Source Community**: For all the amazing tools and libraries



------



## 📄 License## 📄 License



This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.



------



<div align="center"><div align="center">



**Made with ❤️ for Dad, by his tech-savvy son****Made with ❤️ for Dad, by his tech-savvy son**



*Because every business deserves a system as reliable as family.**Because every business deserves a system as reliable as family.*



------



*From paper chaos to digital success - one installment at a time.**From paper chaos to digital success - one installment at a time.*



[⬆️ Back to Top](#-gr-installment-manager)[⬆️ Back to Top](#-gr-installment-manager)



</div></div>
- **Flexible Product Configuration**: Add any product with custom pricing
- **Automated Calculations**: System handles all financial computations
- **Sale Numbers**: Unique identifiers for easy tracking (Format: S-YYYYMMDD-NNNN)
- **Status Tracking**: Active, completed, and defaulted sales
- **Quantity Support**: Handle multiple units in a single sale

### Payment Processing
- **Daily Payment Collection**: Streamlined payment entry interface
- **Multiple Payment Methods**: Cash, bank transfer, cheque support
- **Automatic Balance Updates**: Real-time remaining balance calculations
- **Payment History**: Complete audit trail for all transactions
- **Overpayment Handling**: Flexible payment amounts above minimum daily rates

### User Management & Security
- **Role-Based Access Control**: Super Admin and Data Entry Staff roles
- **Secure Authentication**: Protected routes and API endpoints
- **Data Validation**: Comprehensive input validation and error handling
- **Audit Trails**: Track all user actions and data modifications

### Reporting & Analytics
- **Dashboard Overview**: Key performance indicators and business metrics
- **Financial Reports**: Revenue, outstanding balances, and profit analysis
- **Customer Analytics**: Registration trends and payment behavior
- **Sales Performance**: Daily, weekly, and monthly sales tracking
- **Export Capabilities**: Generate reports for external analysis

### Advanced Features
- **Edit/Delete Capabilities**: Modify sales and payments with proper authorization
- **Search & Filter**: Advanced filtering across all data entities
- **Responsive Design**: Works seamlessly on desktop and mobile devices
- **Real-time Updates**: Automatic data refresh without page reloads
- **Error Recovery**: Graceful error handling with user-friendly messages

## Technology Stack

### Frontend
- **Next.js 14**: React framework with App Router for modern web development
- **TypeScript**: Type-safe development with enhanced IDE support
- **Tailwind CSS**: Utility-first CSS framework for rapid UI development
- **Heroicons**: Beautiful SVG icons for consistent UI elements
- **React Hot Toast**: Elegant notification system for user feedback

### Backend
- **Supabase**: Backend-as-a-Service providing database, authentication, and APIs
- **PostgreSQL**: Robust relational database with advanced features
- **Row Level Security (RLS)**: Database-level security policies
- **Real-time Subscriptions**: Live data updates across clients

### Development Tools
- **ESLint**: Code linting for consistent code quality
- **Prettier**: Code formatting for maintainable codebase
- **Git**: Version control with comprehensive commit history

## Prerequisites

Before installing the system, ensure you have:

- **Node.js**: Version 18.0 or higher
- **npm or yarn**: Package manager for dependency installation
- **Supabase Account**: For backend services (free tier available)
- **Git**: For version control and deployment
- **Modern Web Browser**: Chrome, Firefox, Safari, or Edge

## Installation

### 1. Clone the Repository

```bash
git clone https://github.com/yourusername/fm-tire-management.git
cd fm-tire-management
```

### 2. Install Dependencies

```bash
npm install
# or
yarn install
```

### 3. Environment Configuration

Create a `.env.local` file in the root directory:

```env
# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# Optional: Additional configuration
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

### 4. Development Server

```bash
npm run dev
# or
yarn dev
```

The application will be available at `http://localhost:3000`

## Database Setup

### 1. Create Supabase Project

1. Visit [Supabase](https://supabase.com) and create a new project
2. Note your project URL and anon key from the project settings
3. Navigate to the SQL Editor in your Supabase dashboard

### 2. Initialize Database Schema

Execute the complete schema script located in `database/schema.sql`:

```sql
-- Run the entire contents of database/schema.sql in Supabase SQL Editor
-- This creates all tables, functions, triggers, and security policies
```

### 3. Apply Migrations

If you're upgrading from an existing installation, apply any pending migrations:

```sql
-- Run migration scripts in order from database/migrations/
-- Example: add_sale_number.sql for sale number functionality
```

### 4. Seed Initial Data

```sql
-- Create default admin user (run once)
-- Replace with your actual credentials
INSERT INTO users (email, password_hash, role, full_name, nic_number, phone)
VALUES (
  'admin@yourdomain.com',
  '$2a$10$...',  -- Use proper bcrypt hash
  'super_admin',
  'System Administrator',
  '123456789V',
  '+1234567890'
);

-- Create default product
INSERT INTO products (name, cost_price, selling_price, service_charge, daily_installment, max_installments)
VALUES (
  'Default Product',
  5110.00,
  5610.00,
  700.00,
  57.00,
  100
);
```

## Configuration

### Business Constants

Modify business rules in `src/utils/constants.ts`:

```typescript
export const BUSINESS_CONSTANTS = {
  REGISTRATION_FEE: 250.00,
  DAILY_INSTALLMENT: 57.00,
  SERVICE_CHARGE: 700.00,
  COMPANY_NAME: "Your Company Name",
  APP_NAME: "Your App Name"
}
```

### Payment Methods

Configure available payment methods:

```typescript
export const PAYMENT_METHODS = {
  CASH: 'cash',
  BANK_TRANSFER: 'bank_transfer',
  CHEQUE: 'cheque'
}
```

## Usage Guide

### First-Time Setup

1. **Access the System**: Navigate to your application URL
2. **Login**: Use your admin credentials to access the dashboard
3. **Create Products**: Add your products with pricing information
4. **User Management**: Create staff accounts with appropriate roles

### Daily Operations

#### Customer Registration
1. Navigate to Customers → New Customer
2. Fill in customer details with NIC verification
3. Collect and record registration fee payment
4. Verify customer information before saving

#### Creating Sales
1. Go to Sales → New Sale
2. Select registered customer (registration fee must be paid)
3. Choose product and quantity
4. Enter initial payment amount
5. System calculates remaining balance automatically
6. Review and confirm sale details

#### Recording Payments
1. Navigate to Payments → Record Payment
2. Select customer sale from dropdown (shows sale number and balance)
3. Enter payment amount (minimum daily installment)
4. Choose payment method and add notes if needed
5. System updates remaining balance automatically

#### Managing Data
- **Search**: Use the search functionality to find customers, sales, or payments
- **Filter**: Apply date and status filters for focused views
- **Edit**: Modify existing records (role-dependent permissions)
- **Delete**: Remove records with super admin authorization

## API Documentation

### Authentication

All API endpoints require authentication. Include the Supabase session token in requests:

```javascript
const { data, error } = await supabase.auth.getSession()
// Use data.session.access_token for API calls
```

### Core Endpoints

#### Customers
```javascript
// Get all customers
const { data } = await supabase.from('customers').select('*')

// Create customer
const { data } = await supabase.from('customers').insert({
  full_name: 'John Doe',
  nic_number: '123456789V',
  phone: '+1234567890',
  registration_fee_paid: true
})
```

#### Sales
```javascript
// Get sales with related data
const { data } = await supabase
  .from('sales')
  .select(`
    *,
    customer:customers!customer_id(*),
    product:products!product_id(*)
  `)
```

#### Payments
```javascript
// Record payment
const { data } = await supabase.from('payments').insert({
  sale_id: 'uuid',
  amount: 57.00,
  payment_method: 'cash',
  payment_date: '2025-09-06'
})
```

## Code Structure

### Directory Organization

```
src/
├── app/                    # Next.js App Router pages
│   ├── (auth)/            # Authentication pages
│   ├── dashboard/         # Main application pages
│   └── layout.tsx         # Root layout with metadata
├── components/            # Reusable UI components
│   ├── auth/             # Authentication components
│   ├── customers/        # Customer management
│   ├── sales/            # Sales management
│   ├── payments/         # Payment processing
│   ├── layout/           # Layout components
│   ├── providers/        # Context providers
│   └── ui/               # Generic UI components
├── hooks/                # Custom React hooks
├── lib/                  # Third-party library configurations
├── types/               # TypeScript type definitions
└── utils/               # Utility functions and constants
```

### Key Components Explained

#### DataProvider (`src/components/providers/DataProvider.tsx`)
This is the heart of the application's state management. It provides a centralized data cache that:

```typescript
// Manages global state for all entities
const DataContext = createContext<{
  customers: Customer[]
  sales: Sale[]
  payments: Payment[]
  invalidateData: (entity?: string) => void
}>()

// Automatic data fetching and caching
useEffect(() => {
  fetchCustomers()
  fetchSales()
  fetchPayments()
}, [])
```

The provider implements smart caching to minimize database queries and provides real-time updates across components.

#### Form Components Pattern
All form components follow a consistent pattern:

```typescript
interface FormProps {
  editingItem?: Item | null
  onSubmit: (data: FormData) => void
  onCancel: () => void
}

// Pre-fill form when editing
useEffect(() => {
  if (editingItem) {
    setFormData({
      field1: editingItem.field1,
      field2: editingItem.field2
    })
  }
}, [editingItem])
```

#### Table Components Architecture
Table components are designed for reusability and performance:

```typescript
interface TableProps {
  items: Item[]
  loading: boolean
  onEdit?: (item: Item) => void
  onDelete?: (itemId: string) => void
  userRole?: string
}

// Role-based action visibility
{userRole === 'super_admin' && (
  <button onClick={() => onDelete(item.id)}>
    Delete
  </button>
)}
```

## Business Logic

### Financial Calculations

The system handles complex financial calculations automatically:

```typescript
// Sale total calculation
const totalAmount = (product.selling_price * quantity) + product.service_charge

// Remaining balance after initial payment
const remainingBalance = totalAmount - initialPayment

// Payment processing
const newBalance = Math.max(0, currentBalance - paymentAmount)
const newStatus = newBalance === 0 ? 'completed' : 'active'
```

### Sale Number Generation

Unique sale numbers are generated using database functions:

```sql
-- Format: S-YYYYMMDD-NNNN (e.g., S-20250906-0001)
CREATE FUNCTION generate_sale_number() RETURNS TEXT AS $$
DECLARE
    today_date TEXT;
    next_number INTEGER;
BEGIN
    today_date := to_char(CURRENT_DATE, 'YYYYMMDD');
    
    SELECT COALESCE(MAX(CAST(substring(sale_number from 13 for 4) AS INTEGER)), 0) + 1
    INTO next_number
    FROM sales 
    WHERE sale_number LIKE 'S-' || today_date || '-%';
    
    RETURN 'S-' || today_date || '-' || LPAD(next_number::TEXT, 4, '0');
END;
$$ LANGUAGE plpgsql;
```

### Data Validation

Comprehensive validation ensures data integrity:

```typescript
const validateCustomer = (data: CustomerForm): ValidationErrors => {
  const errors: ValidationErrors = {}
  
  if (!data.nic_number || !isValidNIC(data.nic_number)) {
    errors.nic_number = 'Valid NIC number is required'
  }
  
  if (!data.phone || !isValidPhone(data.phone)) {
    errors.phone = 'Valid phone number is required'
  }
  
  return errors
}
```

## Development

### Getting Started with Development

1. **Fork the Repository**: Create your own copy for development
2. **Create Feature Branch**: Use descriptive branch names
3. **Follow Code Standards**: ESLint and Prettier configurations are provided
4. **Write Tests**: Add tests for new functionality (testing framework to be implemented)
5. **Update Documentation**: Keep README and inline comments current

### Code Style Guidelines

- **TypeScript**: Use strict type checking
- **Components**: Prefer functional components with hooks
- **Naming**: Use descriptive names for variables and functions
- **Comments**: Explain complex business logic and calculations
- **Error Handling**: Implement comprehensive error boundaries

### Adding New Features

1. **Plan the Feature**: Document requirements and business logic
2. **Create Types**: Define TypeScript interfaces for new data structures
3. **Database Changes**: Create migration scripts for schema modifications
4. **API Integration**: Update data providers and API calls
5. **UI Implementation**: Create reusable components following established patterns

## Deployment

### Production Build

```bash
# Create optimized production build
npm run build

# Start production server
npm start
```

### Environment Variables for Production

```env
NEXT_PUBLIC_SUPABASE_URL=your_production_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_production_anon_key
NEXT_PUBLIC_APP_URL=https://yourdomain.com
```

### Deployment Platforms

#### Vercel (Recommended)
1. Connect your GitHub repository to Vercel
2. Configure environment variables in Vercel dashboard
3. Deploy automatically on git push

#### Other Platforms
- **Netlify**: Static site deployment with serverless functions
- **Railway**: Full-stack deployment with database hosting
- **DigitalOcean**: VPS deployment with custom server configuration

### Database Backup

Regular backups are crucial for production systems:

```bash
# Create backup using Supabase CLI
supabase db dump --db-url "postgresql://..." > backup.sql

# Restore from backup
supabase db reset --db-url "postgresql://..." --backup-file backup.sql
```

## Contributing

We welcome contributions! Please follow these guidelines:

### Pull Request Process

1. **Issue First**: Create an issue describing the problem or feature
2. **Branch Naming**: Use format `feature/description` or `fix/description`
3. **Commit Messages**: Write clear, descriptive commit messages
4. **Testing**: Ensure all existing functionality remains intact
5. **Documentation**: Update relevant documentation for changes

### Coding Standards

- Follow existing code patterns and naming conventions
- Use TypeScript for all new code
- Implement proper error handling
- Add comments for complex business logic
- Ensure responsive design for UI changes

## Security

### Data Protection
- All sensitive data is encrypted in transit and at rest
- Row Level Security (RLS) policies protect data access
- User authentication uses secure token-based system
- Input validation prevents SQL injection and XSS attacks

### User Access Control
- Role-based permissions control feature access
- Super Admin: Full system access including deletions
- Data Entry Staff: Limited to daily operations
- Audit trails track all user actions

### Best Practices
- Regular security updates for dependencies
- Environment variables for sensitive configuration
- HTTPS enforcement in production
- Regular backup and recovery testing

## Troubleshooting

### Common Issues

#### Database Connection Problems
```bash
# Check Supabase connection
Error: Failed to connect to database
Solution: Verify NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY
```

#### Authentication Issues
```bash
# User cannot login
Error: Invalid login credentials
Solution: Check user exists in users table and password is correct
```

#### Build Failures
```bash
# TypeScript compilation errors
Error: Type 'X' is not assignable to type 'Y'
Solution: Check type definitions in src/types/index.ts
```

#### Performance Issues
- **Slow queries**: Check database indexes and query optimization
- **Large data sets**: Implement pagination for tables with many records
- **Memory usage**: Monitor component re-renders and optimize React hooks

### Getting Help

1. **Check the logs**: Browser console and server logs provide detailed error information
2. **Review documentation**: Most issues are covered in this README
3. **Community support**: Create issues in the GitHub repository
4. **Professional support**: Contact the development team for custom modifications

## Future Enhancements

### Planned Features
- **Mobile App**: React Native application for field operations
- **Advanced Reporting**: PDF generation and email delivery
- **Integration APIs**: Connect with accounting software
- **Multi-tenant Support**: Serve multiple businesses from single installation
- **Advanced Analytics**: Machine learning for payment prediction

### Customization Options
- **Product Categories**: Group products by type or brand
- **Custom Fields**: Add business-specific data fields
- **Workflow Automation**: Automated notifications and follow-ups
- **Multi-language Support**: Localization for different languages

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## Acknowledgments

- Built with modern web technologies for reliability and performance
- Designed with small business owners in mind
- Inspired by real-world installment business challenges

**Remember**: This system can handle any product-based installment business, not just tires. The flexible architecture adapts to your specific business needs while maintaining the robust financial tracking that makes installment sales manageable and profitable.

For questions, suggestions, or custom development needs, please don't hesitate to reach out. Happy selling!

## System Features

### 1. User Management
- Super Admin (Business Owner)
- Data Entry Staff (Limited Permissions)
- Secure login with role-based access

### 2. Core Modules
- Customer Registration & Profile Management
- Sales Transaction Recording
- Daily Installment Payment Tracking
- Payment History & Outstanding Balance
- Inventory Management

### 3. Analytics Dashboard
- Business Growth Charts
- Profit/Loss Analysis
- Sales Overview
- Payment Collection Status
- Predictive Analytics
- Customer Payment Behavior

### 4. Technical Stack
- **Frontend**: React.js with Tailwind CSS
- **Backend**: Node.js with Express
- **Database**: Supabase (PostgreSQL)
- **Authentication**: Supabase Auth
- **Charts**: Chart.js/Recharts
- **Deployment**: Vercel/Netlify

## Project Structure
```
fm-tire-management/
├── frontend/          # React application
├── backend/          # Node.js API (if needed)
├── database/         # Supabase schema and migrations
├── docs/            # Documentation
└── deployment/      # Deployment configurations
```

## Installation & Setup

### Prerequisites
- Node.js 18+
- npm or yarn
- Supabase account

### Getting Started
1. Clone the repository
2. Install dependencies: `npm install`
3. Configure environment variables
4. Setup Supabase database
5. Run development server: `npm run dev`

## Security Features
- Role-based access control
- Secure password hashing
- Data encryption
- Audit trails
- Input validation

## Maintenance
- Regular backups
- Performance monitoring
- Security updates
- Feature enhancements based on business needs
